<!DOCTYPE html>
<html>
<head>
    <title>Loading Your Spotify Data</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script>
        window.onload = function () {
            // Start the loading animation
            startLoadingAnimation();

            // Redirect after a short delay
            setTimeout(() => {
                window.location.href = "/get_user";
            }, 2000);  // Slightly longer delay for better UX
        }

        function startLoadingAnimation() {
            const circles = document.querySelectorAll('.loading-circle');
            circles.forEach((circle, index) => {
                setTimeout(() => {
                    circle.classList.add('pulse');
                    setTimeout(() => {
                        circle.classList.remove('pulse');
                    }, 600);
                }, index * 200);
            });

            // Repeat the animation
            setTimeout(startLoadingAnimation, 1200);
        }
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #ffffff;
            color: #333333;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .loading-container {
            text-align: center;
            max-width: 600px;
            padding: 40px;
        }

        .logo {
            margin-bottom: 30px;
        }

        .loading-title {
            font-size: 28px;
            margin-bottom: 20px;
            color: #333333;
        }

        .loading-subtitle {
            font-size: 16px;
            margin-bottom: 30px;
            color: #666666;
        }

        .loading-animation {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin: 30px 0;
        }

        .loading-circle {
            width: 16px;
            height: 16px;
            background-color: #1DB954;
            border-radius: 50%;
            opacity: 0.6;
            transition: transform 0.3s, opacity 0.3s;
        }

            .loading-circle.pulse {
                transform: scale(1.3);
                opacity: 1;
            }

        .footer-text {
            margin-top: 40px;
            font-size: 14px;
            color: #666666;
        }

        /* Spotify logo styling */
        .spotify-logo {
            width: 60px;
            height: 60px;
            margin-bottom: 20px;
        }

            .spotify-logo svg {
                width: 100%;
                height: 100%;
            }
    </style>
</head>
<body>
    <div class="loading-container">
        <div class="logo">
            <div class="spotify-logo">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2Z" fill="#1DB954" />
                    <path d="M16.7917 17.1667C16.6858 17.1668 16.5809 17.1459 16.4841 17.1053C16.3873 17.0647 16.3004 17.0053 16.2292 16.9308C16.1579 16.8564 16.1037 16.7677 16.0693 16.6699C16.0349 16.5721 16.0211 16.4673 16.0287 16.3632C16.0363 16.2591 16.0651 16.1582 16.113 16.0667C16.1609 15.9752 16.2269 15.895 16.3069 15.8312C16.3869 15.7673 16.4792 15.7212 16.5783 15.6955C16.6774 15.6699 16.7811 15.6653 16.8822 15.6819C17.8238 15.8422 18.5933 15.9226 19.1785 15.9226C19.3673 15.9326 19.5559 15.9019 19.7309 15.8326C19.9059 15.7633 20.0631 15.6573 20.191 15.5217C20.3189 15.3861 20.4146 15.2242 20.4716 15.0469C20.5286 14.8695 20.5457 14.6812 20.5216 14.4959C20.4445 13.9226 19.4691 13.4959 17.5525 12.7599C16.1645 12.2335 13.7168 11.3701 12.5071 9.26195C12.1767 8.69675 12.0037 8.04908 12.0069 7.38923C12.01 6.72938 12.1892 6.08371 12.5249 5.52173C12.8606 4.95975 13.3407 4.50247 13.915 4.19654C14.4893 3.8906 15.1373 3.74915 15.7974 3.78752C16.8656 3.85085 17.9808 3.90085 19.1429 3.93752C19.2474 3.9411 19.3493 3.96661 19.4412 4.01228C19.5331 4.05795 19.6129 4.12277 19.6755 4.20242C19.738 4.28207 19.782 4.37477 19.8044 4.47434C19.8268 4.57391 19.8272 4.67785 19.8056 4.77757C19.784 4.87729 19.7408 4.97026 19.6789 5.05029C19.617 5.13032 19.5377 5.19561 19.4462 5.24179C19.3547 5.28797 19.2531 5.31404 19.1487 5.31819C19.0444 5.32234 18.9407 5.30449 18.846 5.26585C17.7061 5.22918 16.5947 5.17918 15.5379 5.11585C15.1998 5.0966 14.8633 5.16833 14.5622 5.3232C14.2611 5.47807 14.0062 5.71028 13.8245 5.99518C13.6427 6.28009 13.5409 6.60697 13.5296 6.94374C13.5184 7.28051 13.598 7.6143 13.7598 7.91085C14.6526 9.42918 16.6253 10.1292 18.1285 10.7026C20.2426 11.4853 21.6342 12.1613 21.7847 13.6467C21.8405 14.1148 21.7835 14.5898 21.6189 15.0315C21.4543 15.4731 21.1872 15.8684 20.8404 16.1851C20.4935 16.5018 20.0772 16.7313 19.6241 16.8549C19.171 16.9785 18.6937 16.9929 18.2336 16.8972C17.6179 16.8972 16.8141 16.8132 15.8188 16.6492C16.069 16.4908 16.2885 16.2877 16.4678 16.0492C16.5459 16.1174 16.6364 16.1699 16.7349 16.2037C16.8334 16.2376 16.938 16.2522 17.0428 16.2467C17.5667 16.3626 18.0975 16.435 18.6312 16.4633C18.8803 16.5025 19.1369 16.4725 19.3713 16.3763C19.6057 16.2801 19.8093 16.1214 19.9596 15.9172C20.1099 15.713 20.2012 15.4707 20.2232 15.2168C20.2452 14.9629 20.1971 14.7078 20.0845 14.4786C19.8335 13.8959 18.9407 13.5319 17.1249 12.8319C16.4551 12.5851 15.742 12.2324 14.8598 11.7733C14.1152 11.3825 13.4421 10.8755 12.868 10.2706C12.0966 9.44239 11.6598 8.42918 11.6312 7.37918C11.6197 6.4949 11.9338 5.63951 12.5159 4.96252C13.0979 4.28553 13.9085 3.83557 14.7908 3.69585C15.8625 3.63252 17.0024 3.58252 18.1761 3.54585C18.3882 3.53893 18.597 3.58873 18.7823 3.69016C18.9675 3.79159 19.1227 3.94101 19.2325 4.12358C19.3423 4.30615 19.4029 4.51514 19.4078 4.72996C19.4127 4.94478 19.3618 5.15706 19.2605 5.34536C19.1592 5.53366 19.0108 5.69065 18.8301 5.80133C18.6494 5.91201 18.4423 5.97377 18.2304 5.97923C18.0184 5.98469 17.8086 5.93366 17.622 5.83166C17.4353 5.72966 17.2783 5.57998 17.1668 5.39585C17.0879 5.28085 16.9714 5.20751 16.8441 5.14918C16.1011 5.19252 15.0273 5.26252 13.9911 5.33252C13.4829 5.41502 13.0207 5.6828 12.6814 6.0834C12.3421 6.484 12.1498 6.99243 12.1425 7.52085C12.1353 8.04927 12.3136 8.56285 12.6414 8.97173C12.9693 9.38061 13.4231 9.66012 13.9279 9.75585C14.0172 9.77613 14.1083 9.7866 14.1998 9.78712C15.2953 10.3751 16.1677 10.8359 17.4178 11.3292C19.1642 12.0092 21.3451 12.8626 21.7881 14.7826C21.8828 15.4001 21.7954 16.0317 21.5352 16.6064C21.275 17.1811 20.8526 17.6752 20.3148 18.0343C19.777 18.3934 19.1447 18.604 18.4899 18.6435C17.8351 18.683 17.1829 18.5498 16.6062 18.2586C15.6956 18.1026 14.7936 17.9026 13.9046 17.6599C13.8005 17.6246 13.7052 17.5649 13.6269 17.486C13.5486 17.4071 13.4891 17.3113 13.4529 17.2067C13.4166 17.1022 13.4045 16.9916 13.4174 16.883C13.4304 16.7743 13.468 16.6702 13.5275 16.5779C13.587 16.4857 13.6671 16.4077 13.7618 16.3499C13.8565 16.2921 13.9634 16.2559 14.0747 16.2441C14.1861 16.2322 14.2987 16.2451 14.4053 16.2818C14.5119 16.3185 14.6098 16.3781 14.6924 16.4566C14.9856 16.5281 15.2825 16.5819 15.5814 16.6176C15.8312 16.6637 16.0845 16.6941 16.3393 16.7086C16.439 16.7122 16.5374 16.735 16.6286 16.7757C16.7197 16.8165 16.8015 16.8744 16.8689 16.9459C16.9364 17.0174 16.9881 17.1009 17.0211 17.1918C17.0541 17.2826 17.068 17.3788 17.0618 17.4749C17.0556 17.5709 17.0295 17.6646 16.9852 17.7499C16.941 17.8352 16.8796 17.9101 16.8049 17.9697C16.7302 18.0294 16.6439 18.0726 16.5517 18.0967C16.4595 18.1208 16.3635 18.1252 16.2693 18.1099L16.7917 17.1667ZM11.5583 13.9719C10.6025 12.9995 10.0671 11.6959 10.0671 10.3399C10.0671 10.1335 10.0727 9.92719 10.0839 9.72719C10.0948 9.52519 10.0502 9.3239 9.95515 9.14392C9.86015 8.96394 9.71825 8.8117 9.54328 8.70267C9.36831 8.59364 9.16655 8.53199 8.9638 8.52526C8.76105 8.51853 8.55573 8.56694 8.37464 8.66534C8.19355 8.76373 8.04345 8.90745 7.9387 9.08155C7.83394 9.25565 7.77827 9.45385 7.77727 9.65658C7.77627 9.85932 7.82997 10.058 7.93297 10.2333C8.19001 10.6882 8.31742 11.207 8.29911 11.7314C8.28079 12.2558 8.1174 12.7658 7.82472 13.2024C7.53205 13.6389 7.12121 13.9844 6.63954 14.2003C6.15786 14.4161 5.62621 14.4945 5.1014 14.4267C4.97925 14.4078 4.85321 14.4198 4.73764 14.4613C4.62206 14.5028 4.52078 14.5725 4.44391 14.664C4.36704 14.7554 4.31731 14.8653 4.29967 14.9823C4.28203 15.0992 4.29707 15.2186 4.3432 15.3281C4.38934 15.4376 4.46484 15.5331 4.56192 15.6046C4.65899 15.6762 4.77419 15.7212 4.89634 15.7347C5.01849 15.7482 5.14245 15.7297 5.25474 15.6809C5.63033 15.5339 6.02774 15.4535 6.43073 15.4425C6.83373 15.4315 7.23523 15.5002 7.61451 15.6449C7.99379 15.7895 8.34407 16.0076 8.64689 16.2884C8.94971 16.5693 9.19984 16.908 9.38477 17.2852C9.46258 17.4505 9.5938 17.5865 9.75823 17.6738C9.92265 17.7611 10.1115 17.7955 10.2985 17.7722C10.4856 17.7489 10.6613 17.669 10.8022 17.5436C10.9431 17.4183 11.0422 17.2537 11.0867 17.0715C11.1312 16.8893 11.1191 16.6981 11.0517 16.523C10.8852 16.0909 10.6471 15.6884 10.3472 15.3332C10.0473 14.978 9.69 14.6752 9.29193 14.4399C9.9908 14.1981 10.6129 13.792 11.0906 13.2612C12.0352 14.0359 13.1639 14.5485 14.3629 14.7519C14.4838 14.7733 14.6085 14.7635 14.7241 14.7235C14.8398 14.6834 14.9421 14.6144 15.0207 14.5243C15.0994 14.4342 15.1516 14.3263 15.1724 14.2106C15.1931 14.0949 15.1818 13.9756 15.1395 13.8658C15.0971 13.756 15.0252 13.6592 14.9316 13.5857C14.838 13.5122 14.7266 13.4645 14.6095 13.4473C14.4923 13.4301 14.373 13.4442 14.2633 13.4882C13.3122 13.6694 12.3861 13.5731 11.5583 13.9719ZM9.34706 11.6786C9.14293 11.2567 9.0318 10.7948 9.01993 10.3255C9.02175 10.2123 9.02737 10.0992 9.03677 9.98655C9.21115 10.0023 9.37952 10.0566 9.5338 10.1459C9.54936 10.2099 9.56214 10.2745 9.57214 10.3399C9.57214 11.4306 9.99151 12.4666 10.7266 13.2279C10.1828 12.8359 9.69971 12.3326 9.34706 11.7486V11.6786Z" fill="white" />
                </svg>
            </div>
        </div>

        <h1 class="loading-title">Analyzing Your Spotify Data</h1>
        <p class="loading-subtitle">We're fetching your listening history and preparing your personalized dashboard.</p>

        <div class="loading-animation">
            <div class="loading-circle"></div>
            <div class="loading-circle"></div>
            <div class="loading-circle"></div>
        </div>

        <p class="footer-text">This may take a moment depending on your library size.</p>
    </div>
</body>
</html>